{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport async function searchImage(searchQuery, page = 1) {\n    const BASE_URL = \"https://pixabay.com\";\n    const END_POINT = \"/api/\";\n    const params = {\n        key: \"44052553-0e6a302568f711546d3ca79ba\",\n        q: searchQuery,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page: page,\n        per_page: 15,\n    };\n\n    try {\n        const response = await axios.get(`${BASE_URL}${END_POINT}`, { params });\n        return response.data;\n    } catch (error) {\n        console.error(`HTTP error! status: ${error.response?.status || error.message}`);\n        throw new Error(`HTTP error! status: ${error.response?.status || error.message}`);\n    }\n}","export function singleImageTemplate(image) {\n    return `\n        <li class=\"gallery-item\">\n            <a href=\"${image.largeImageURL}\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" class=\"gallery-item-image\">\n                <div class=\"info\">\n                    <p class=\"info-title\">Likes: <span class=\"info-value\">${image.likes}</span></p>\n                    <p class=\"info-title\">Views: <span class=\"info-value\">${image.views}</span></p>\n                    <p class=\"info-title\">Comments: <span class=\"info-value\">${image.comments}</span></p>\n                    <p class=\"info-title\">Downloads: <span class=\"info-value\">${image.downloads}</span></p>\n                </div>\n            </a>\n        </li>\n    `;\n}\n\nexport function imageTemplate(images) {\n    return images.map(singleImageTemplate).join('');\n}","import axios from \"axios\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { searchImage } from \"./js/pixabay-api.js\";\nimport { imageTemplate } from \"./js/render-functions.js\";\n\nconst formEl = document.querySelector(\".form\");\nconst imagesGallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\"#loader\");\nconst loadMoreBtn = document.querySelector(\"#load-more\");\n\nlet currentPage = 1;\nlet currentQuery = \"\";\nlet totalHits = 0;\n\nformEl.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n\n    currentQuery = event.target.elements.searchQuery.value.trim();\n\n    if (!currentQuery) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Search query cannot be empty!',\n        });\n        return;\n    }\n\n    currentPage = 1;\n    imagesGallery.innerHTML = '';\n    loadMoreBtn.classList.add('hidden');\n    loader.classList.remove('hidden');\n\n    try {\n        const data = await searchImage(currentQuery, currentPage);\n        totalHits = data.totalHits;\n\n        if (data.hits.length === 0) {\n            iziToast.warning({\n                title: 'Warning',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n            });\n        } else {\n            const markup = imageTemplate(data.hits);\n            imagesGallery.innerHTML = markup;\n            const lightbox = new SimpleLightbox('.gallery a', {\n                captionsData: \"alt\",\n                captionDelay: 250\n            }).refresh();\n\n            if (data.hits.length < totalHits) {\n                loadMoreBtn.classList.remove('hidden');\n            }\n\n            event.target.elements.searchQuery.value = '';\n        }\n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: error.message,\n        });\n    } finally {\n        loader.classList.add('hidden');\n    }\n});\n\nloadMoreBtn.addEventListener(\"click\", async () => {\n    currentPage += 1;\n    loader.classList.remove('hidden');\n\n    try {\n        const data = await searchImage(currentQuery, currentPage);\n        const markup = imageTemplate(data.hits);\n        imagesGallery.insertAdjacentHTML('beforeend', markup);\n        const lightbox = new SimpleLightbox('.gallery a', {\n            captionsData: \"alt\",\n            captionDelay: 250\n        }).refresh();\n\n        const loadedImagesCount = imagesGallery.querySelectorAll('.gallery-item').length;\n        if (loadedImagesCount >= totalHits) {\n            loadMoreBtn.classList.add('hidden');\n            iziToast.info({\n                title: 'Info',\n                message: \"We're sorry, but you've reached the end of search results.\",\n            });\n        }\n\n        const galleryItemHeight = imagesGallery.firstElementChild.getBoundingClientRect().height;\n        window.scrollBy({\n            top: galleryItemHeight * 2,\n            behavior: 'smooth'\n        });\n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: error.message,\n        });\n    } finally {\n        loader.classList.add('hidden');\n    }\n});"],"names":["searchImage","searchQuery","page","BASE_URL","END_POINT","params","axios","error","_a","_b","singleImageTemplate","image","imageTemplate","images","formEl","imagesGallery","loader","loadMoreBtn","currentPage","currentQuery","totalHits","event","iziToast","data","markup","lightbox","SimpleLightbox","galleryItemHeight"],"mappings":"owBAEO,eAAeA,EAAYC,EAAaC,EAAO,EAAG,SACrD,MAAMC,EAAW,sBACXC,EAAY,QACZC,EAAS,CACX,IAAK,qCACL,EAAGJ,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EAClB,EAEI,GAAI,CAEA,OADiB,MAAMI,EAAM,IAAI,GAAGH,CAAQ,GAAGC,CAAS,GAAI,CAAE,OAAAC,CAAQ,CAAA,GACtD,IACnB,OAAQE,EAAO,CACZ,cAAQ,MAAM,yBAAuBC,EAAAD,EAAM,WAAN,YAAAC,EAAgB,SAAUD,EAAM,OAAO,EAAE,EACxE,IAAI,MAAM,yBAAuBE,EAAAF,EAAM,WAAN,YAAAE,EAAgB,SAAUF,EAAM,OAAO,EAAE,CACnF,CACL,CCtBO,SAASG,EAAoBC,EAAO,CACvC,MAAO;AAAA;AAAA,uBAEYA,EAAM,aAAa;AAAA,4BACdA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,4EAEUA,EAAM,KAAK;AAAA,4EACXA,EAAM,KAAK;AAAA,+EACRA,EAAM,QAAQ;AAAA,gFACbA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,KAK/F,CAEO,SAASC,EAAcC,EAAQ,CAClC,OAAOA,EAAO,IAAIH,CAAmB,EAAE,KAAK,EAAE,CAClD,CCTA,MAAMI,EAAS,SAAS,cAAc,OAAO,EACvCC,EAAgB,SAAS,cAAc,UAAU,EACjDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,YAAY,EAEvD,IAAIC,EAAc,EACdC,EAAe,GACfC,EAAY,EAEhBN,EAAO,iBAAiB,SAAU,MAAOO,GAAU,CAK/C,GAJAA,EAAM,eAAc,EAEpBF,EAAeE,EAAM,OAAO,SAAS,YAAY,MAAM,OAEnD,CAACF,EAAc,CACfG,EAAS,MAAM,CACX,MAAO,QACP,QAAS,+BACrB,CAAS,EACD,MACH,CAEDJ,EAAc,EACdH,EAAc,UAAY,GAC1BE,EAAY,UAAU,IAAI,QAAQ,EAClCD,EAAO,UAAU,OAAO,QAAQ,EAEhC,GAAI,CACA,MAAMO,EAAO,MAAMvB,EAAYmB,EAAcD,CAAW,EAGxD,GAFAE,EAAYG,EAAK,UAEbA,EAAK,KAAK,SAAW,EACrBD,EAAS,QAAQ,CACb,MAAO,UACP,QAAS,0EACzB,CAAa,MACE,CACH,MAAME,EAASZ,EAAcW,EAAK,IAAI,EACtCR,EAAc,UAAYS,EAC1B,MAAMC,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,GAC9B,CAAa,EAAE,QAAO,EAENH,EAAK,KAAK,OAASH,GACnBH,EAAY,UAAU,OAAO,QAAQ,EAGzCI,EAAM,OAAO,SAAS,YAAY,MAAQ,EAC7C,CACJ,OAAQd,EAAO,CACZe,EAAS,MAAM,CACX,MAAO,QACP,QAASf,EAAM,OAC3B,CAAS,CACT,QAAc,CACNS,EAAO,UAAU,IAAI,QAAQ,CAChC,CACL,CAAC,EAEDC,EAAY,iBAAiB,QAAS,SAAY,CAC9CC,GAAe,EACfF,EAAO,UAAU,OAAO,QAAQ,EAEhC,GAAI,CACA,MAAMO,EAAO,MAAMvB,EAAYmB,EAAcD,CAAW,EAClDM,EAASZ,EAAcW,EAAK,IAAI,EACtCR,EAAc,mBAAmB,YAAaS,CAAM,EACpD,MAAMC,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,GAC1B,CAAS,EAAE,QAAO,EAEgBX,EAAc,iBAAiB,eAAe,EAAE,QACjDK,IACrBH,EAAY,UAAU,IAAI,QAAQ,EAClCK,EAAS,KAAK,CACV,MAAO,OACP,QAAS,4DACzB,CAAa,GAGL,MAAMK,EAAoBZ,EAAc,kBAAkB,sBAAqB,EAAG,OAClF,OAAO,SAAS,CACZ,IAAKY,EAAoB,EACzB,SAAU,QACtB,CAAS,CACJ,OAAQpB,EAAO,CACZe,EAAS,MAAM,CACX,MAAO,QACP,QAASf,EAAM,OAC3B,CAAS,CACT,QAAc,CACNS,EAAO,UAAU,IAAI,QAAQ,CAChC,CACL,CAAC"}